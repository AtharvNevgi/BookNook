<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | BookNook</title>
  
  <%- include('../../partials/admin/header') %>
<style>
  .table-responsive{
    max-height: 50vh;
    overflow: scroll;
  }

</style>
</head>
<body class="bg-light">

  <!-- Navbar -->
    <%- include('../../partials/admin/navbar') %>

  <!-- Dashboard Overview -->
  <div class="container my-5">
    <div class="text-center mb-5">
      <h2 class="fw-bold">Admin Dashboard</h2>
      <p class="text-muted">Monitor overall activity and manage the BookNook platform.</p>
    </div>

    <!-- Statistics -->
    

    <!-- User and Book Tables -->
    <div class="card shadow-sm p-4 mb-5">
      <h4 class="mb-3">Recent Users</h4>
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            <% user.forEach((user, index) => { %>
              <tr>
                <td><% index + 1 %></td>
                <td><%= user.firstname %> <%= user.lastname %></td>
                <td><%= user.email %></td>
                <td><%= user.phone %></td>
                <td><%= user.role %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card shadow-sm p-4">
      <h4 class="mb-3">Recent Books</h4>
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Title</th>
              <th>Author</th>
              <th>Price</th>
              <th>Seller</th>
              <th>Condition</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <% book.forEach((book, index) => { %>
              <tr>
                <td><% index + 1 %></td>
                <td><%= book.title %></td>
                <td><%= book.author %></td>
                <td>â‚¹ <%= book.price %></td>
                <td><%= book.userId.firstname %></td>
                <td><%= book.condition %></td>
                <td>
                  <a href="/books/<%= book._id %>" class="btn btn-sm btn-outline-primary">View</a>
                  <form action="/admin/books/delete/<%= book._id %>" method="POST" class="d-inline">
                    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this book?')">Delete</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <%- include('../../partials/admin/footer') %>
</body>
</html>